<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form action="">
        <ul>
            <li>
                <table>标题:</table>
            </li>
            <li><input type="text"></li>
            <li>
                <table>缩略图</table>
            </li>
            <li>
                <input type="file" name="file1" id="file1">
                <img src="" alt="" id="img1">
            </li>
        </ul>
    </form>
    <script>
        var f = document.querySelector("#file1");
        var img1 = document.querySelector("#img1")
        f.onchange = function(e) {
            var f1 = e.target.files[0];
            console.log(f1);
            var fsize = f1.size; //尺寸
            var ftype = f1.type; //类型
            var fname = f1.name; //名称
            console.log(fsize, ftype, fname);
            // if (fsize > 1024) {
            //     alert("文件过大")
            //     return false;
            // }
            var faar = fname.split(".");
            type = faar[faar.length - 1];
            // if (type !== "jpg") {
            //     alert("类型不对");
            //     return;
            // }
            var freader = new FileReader();
            freader.readAsDataURL(e.target.files[0])
            freader.onload = function(e) {
                console.log(e.target.result);
                img1.src = e.target.result;
            }
        }
        $.ajax({
            type: "post",
            url: "https://hekk-8g0q9nf0b64c30a6-1304707280.tcloudbaseapp.com/alibaixiu/index.html",
            data: formdata,
            dataType: 'json',
            processData: false, // 告诉jQuery不要去处理发送的数据
            contentType: false, // 告诉jQuery不要去设置Content-Type请求头
            xhrFields: {
                withCredentials: true
            },
            async: true, //默认是true：异步，false：同步。
            success: function(data) {
                callback(data);
            },
            error: function(data) {
                layer.msg('请求异常');
            },
        });
    </script>
</body>

</html>
